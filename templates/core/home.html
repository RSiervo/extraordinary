{% extends 'core/base.html' %}
{% load static %}
{% block content %}

<!-- HERO SECTION -->
<section class="relative overflow-hidden min-h-[90vh] flex items-center justify-center bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900">
  <!-- Floating Orbs -->
  <div class="absolute w-64 h-64 md:w-96 md:h-96 bg-green-500/20 rounded-full blur-3xl top-10 left-[-80px] animate-pulse"></div>
  <div class="absolute w-60 h-60 md:w-80 md:h-80 bg-teal-400/10 rounded-full blur-3xl bottom-10 right-[-80px] animate-ping"></div>

  <div class="max-w-6xl mx-auto px-6 py-16 sm:py-24 text-center lg:text-left flex flex-col-reverse lg:flex-row items-center gap-12 relative z-10">
    <!-- Text -->
    <div class="lg:w-1/2 space-y-6" data-aos="fade-right">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-teal-400 animate__animated animate__fadeInDown">
        Extraordinary
      </h1>
      <p class="text-slate-300 text-base sm:text-lg">
        Discover creative stories, short videos, and the heartbeat of our community.  
        Follow us on Facebook and join the creative movement!
      </p>

      <div class="flex flex-wrap justify-center lg:justify-start gap-4 mt-6">
        <a href="#featured" class="px-5 sm:px-6 py-3 rounded-lg bg-gradient-to-r from-green-400 to-teal-500 text-slate-900 font-semibold shadow-lg hover:scale-105 transform transition">
          Explore Featured
        </a>
        <a href="#join" class="px-5 sm:px-6 py-3 rounded-lg border border-slate-600 hover:bg-slate-800 transition">
          Join Newsletter
        </a>
      </div>

      <div class="mt-8 flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4">
        <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-yellow-400 to-orange-500 flex items-center justify-center font-bold text-slate-900">F</div>
        <p class="text-slate-300 text-sm sm:text-base">
          Follow My <a href="https://facebook.com" target="_blank" class="text-green-300 hover:underline">Facebook page</a>
        </p>
      </div>
    </div>

    <div class="lg:w-1/2 flex justify-center" data-aos="fade-left">
      <div class="relative w-full max-w-sm sm:max-w-md rounded-3xl overflow-hidden shadow-2xl transform hover:scale-[1.05] transition duration-500">

        <!-- Aura Energy Waves -->
        <div class="absolute inset-0 rounded-3xl bg-gradient-to-r from-green-400/40 via-teal-500/40 to-green-400/40 blur-2xl animate-aura"></div>

        <!-- Shimmer Energy Lines -->
        <div class="absolute inset-0 overflow-hidden rounded-3xl">
          <div class="absolute top-0 left-[-50%] w-[200%] h-full bg-gradient-to-r from-transparent via-green-400/40 to-transparent animate-shimmer"></div>
        </div>

        <!-- Floating Logo -->
        <img src="{% static 'images/hero.jpg' %}" alt="hero" 
          class="relative z-10 w-full h-64 sm:h-80 object-cover rounded-3xl animate-float-smooth">

        <!-- Particle Sparks -->
        <div class="absolute inset-0 z-20 pointer-events-none">
          {% for i in "123456789" %}
            <span class="particle"></span>
          {% endfor %}
        </div>

      </div>
    </div>

  </div>
</section>

<!-- ABOUT -->
<section id="about" class="py-16 sm:py-20 bg-slate-800 text-center">
  <div class="max-w-5xl mx-auto px-6" data-aos="fade-up">
    <h2 class="text-3xl md:text-4xl font-bold text-green-400 mb-4">About Extraordinary</h2>
    <p class="text-slate-300 max-w-3xl mx-auto text-sm sm:text-base">
      Extraordinary is a creative hub where passion meets storytelling.  
      We share bite-sized videos, community-driven stories, and inspiring content that highlights real people making real impact.
    </p>

    <div class="mt-12 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-6">
      <div class="p-4 bg-slate-700/30 rounded-xl hover:bg-slate-700 transition">
        <i class="fas fa-users text-teal-400 text-3xl mb-2"></i>
        <h4 class="font-semibold text-lg">10K+</h4>
        <p class="text-slate-400 text-sm">Members</p>
      </div>
      <div class="p-4 bg-slate-700/30 rounded-xl hover:bg-slate-700 transition">
        <i class="fas fa-video text-teal-400 text-3xl mb-2"></i>
        <h4 class="font-semibold text-lg">500+</h4>
        <p class="text-slate-400 text-sm">Videos</p>
      </div>
      <div class="p-4 bg-slate-700/30 rounded-xl hover:bg-slate-700 transition">
        <i class="fas fa-heart text-teal-400 text-3xl mb-2"></i>
        <h4 class="font-semibold text-lg">1M+</h4>
        <p class="text-slate-400 text-sm">Reactions</p>
      </div>
      <div class="p-4 bg-slate-700/30 rounded-xl hover:bg-slate-700 transition">
        <i class="fas fa-globe text-teal-400 text-3xl mb-2"></i>
        <h4 class="font-semibold text-lg">Worldwide</h4>
        <p class="text-slate-400 text-sm">Reach</p>
      </div>
    </div>
  </div>
</section>

<!-- FEATURED -->
<section id="featured" class="py-20 bg-slate-900">
  <div class="max-w-6xl mx-auto px-6">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-10 text-center sm:text-left">
      <h3 class="text-3xl font-bold text-green-400">Featured</h3>
      <span class="text-slate-400 text-sm sm:text-base">Admin-posted highlights</span>
    </div>

    <!-- ✅ Same structure & responsiveness as videos.html -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-4 items-start">
      {% for p in posts %}
      <div
        data-aos="zoom-in"
        class="group bg-slate-800/50 border border-slate-700 hover:border-green-400 rounded-2xl overflow-hidden shadow-md hover:shadow-green-400/30 transition-all duration-500 flex flex-col"
      >
        <!-- Thumbnail -->
        <div class="relative w-full aspect-[16/9] overflow-hidden">
          {% if p.image %}
            <img src="{{ p.image.url }}" alt="{{ p.title }}"
                 class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
          {% else %}
            <img src="{% static 'images/default-thumbnail.jpg' %}" alt="Thumbnail"
                 class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
          {% endif %}
          {% if p.video_url %}
          <div class="absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300">
            <button class="bg-green-500 text-white rounded-full p-4 hover:bg-green-400 transition"
              onclick="openVideoModal('{{ p.video_url }}', '{{ p.title }}')">
              <i class="fas fa-play text-lg"></i>
            </button>
          </div>
          {% endif %}
        </div>

        <!-- Card Content -->
        <div class="p-4 flex flex-col flex-grow">
          <h4 class="font-semibold text-lg text-green-400 truncate">{{ p.title }}</h4>

          <p class="text-slate-400 text-sm mt-2 description collapsed transition-all duration-300 ease-in-out">
            {{ p.description }}
          </p>

          <button onclick="toggleDescription(this)" class="text-xs text-green-400 mt-2 hover:text-teal-300 transition">
            Show more
          </button>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center text-slate-400 py-10">
        <i class="fas fa-video-slash text-5xl mb-4"></i>
        <p>No featured posts yet — create some in the admin.</p>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- ✅ Reuse the video modal -->
  <div id="videoModal" class="fixed inset-0 bg-black/80 hidden z-50 flex items-center justify-center">
    <div class="relative w-full max-w-3xl mx-4">
      <button class="absolute -top-10 right-0 text-white text-3xl hover:text-green-400" onclick="closeVideoModal()">&times;</button>
      <div id="nowPlayingTitle" class="absolute top-3 left-4 text-green-400 font-bold text-lg animate-pulse hidden"></div>

      <div id="videoContainer" class="w-full aspect-[16/9] rounded-lg overflow-hidden">
        <!-- iframe or video injected dynamically -->
      </div>
    </div>
  </div>
</section>


<!-- CONTACT & NEWSLETTER -->
<section id="contact" class="py-20 bg-gradient-to-b from-slate-900 to-slate-800">
  <div class="max-w-6xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-10">

    <!-- Contact Form -->
    <div class="bg-slate-800/60 p-8 rounded-2xl shadow-2xl backdrop-blur-sm" data-aos="fade-right">
      <h4 class="text-3xl font-bold text-green-400 mb-3">Contact Us</h4>
      <p class="text-slate-300 mb-6 text-sm sm:text-base leading-relaxed">
        Have a story, idea, or collaboration in mind? We'd love to hear from you. Fill out the form below and let’s make something <span class="text-green-400 font-semibold">Extraordinary</span> together.
      </p>

      <form method="post" action="{% url 'contact' %}" class="space-y-6">
        {% csrf_token %}

        <!-- Name Field -->
        <div class="relative">
          <input type="text" name="name" id="name" required
            class="peer w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-200 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition">
          <label for="name" class="absolute left-4 top-3 text-slate-400 text-sm transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-slate-500 peer-placeholder-shown:text-base peer-focus:top-[-10px] peer-focus:text-green-400 peer-focus:text-sm bg-slate-800/60 px-2">Your Name</label>
        </div>

        <!-- Email Field -->
        <div class="relative">
          <input type="email" name="email" id="email" required
            class="peer w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-200 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition">
          <label for="email" class="absolute left-4 top-3 text-slate-400 text-sm transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-slate-500 peer-placeholder-shown:text-base peer-focus:top-[-10px] peer-focus:text-green-400 peer-focus:text-sm bg-slate-800/60 px-2">Your Email</label>
        </div>

        <!-- Message Field -->
        <div class="relative">
          <textarea name="message" id="message" rows="4" required
            class="peer w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-200 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition resize-none"></textarea>
          <label for="message" class="absolute left-4 top-3 text-slate-400 text-sm transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-slate-500 peer-placeholder-shown:text-base peer-focus:top-[-10px] peer-focus:text-green-400 peer-focus:text-sm bg-slate-800/60 px-2">Your Message</label>
        </div>

        <button class="w-full py-3 bg-gradient-to-r from-green-400 to-teal-400 hover:opacity-90 text-slate-900 font-semibold rounded-lg shadow-lg hover:scale-[1.02] transition-all">
          <i class="fas fa-paper-plane mr-2"></i> Send Message
        </button>
      </form>
    </div>

    <!-- Newsletter -->
    <div class="bg-slate-800/60 p-8 rounded-2xl shadow-2xl backdrop-blur-sm" id="join" data-aos="fade-left">
      <h4 class="text-3xl font-bold text-teal-400 mb-3">Join the Newsletter</h4>
      <p class="text-slate-300 mb-6 text-sm sm:text-base leading-relaxed">
        Be part of our growing <span class="text-teal-400 font-semibold">Extraordinary</span> family — get updates, new stories, and inspiring content straight to your inbox.
      </p>

      <form method="post" action="{% url 'subscribe' %}" class="space-y-6">
        {% csrf_token %}
        <div class="relative">
          <input type="email" name="email" id="newsletter_email" required
            class="peer w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-200 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition">
          <label for="newsletter_email" class="absolute left-4 top-3 text-slate-400 text-sm transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-slate-500 peer-placeholder-shown:text-base peer-focus:top-[-10px] peer-focus:text-teal-400 peer-focus:text-sm bg-slate-800/60 px-2">Email Address</label>
        </div>

        <button class="w-full py-3 bg-gradient-to-r from-teal-400 to-green-400 hover:opacity-90 text-slate-900 font-semibold rounded-lg shadow-lg hover:scale-[1.02] transition-all">
          <i class="fas fa-envelope-open-text mr-2"></i> Subscribe
        </button>
      </form>

      <div class="mt-8">
        <h5 class="font-semibold text-slate-200 mb-3">Follow Us</h5>
        <div class="flex gap-3 justify-center lg:justify-start">
          <a href="https://facebook.com" target="_blank" class="p-3 bg-slate-700 rounded-full hover:bg-green-400 hover:text-slate-900 transition-all duration-300">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="p-3 bg-slate-700 rounded-full hover:bg-teal-400 hover:text-slate-900 transition-all duration-300">
            <i class="fab fa-youtube"></i>
          </a>
          <a href="#" class="p-3 bg-slate-700 rounded-full hover:bg-pink-400 hover:text-slate-900 transition-all duration-300">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
    </div>

  </div>
</section>

<style>
/* Floating animation */
@keyframes float-smooth {
  0%, 100% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-10px) scale(1.03); }
}

/* Aura pulsing glow */
@keyframes aura {
  0% { opacity: 0.4; transform: scale(1); filter: hue-rotate(0deg); }
  50% { opacity: 1; transform: scale(1.08); filter: hue-rotate(45deg); }
  100% { opacity: 0.4; transform: scale(1); filter: hue-rotate(0deg); }
}

/* Shimmer sweep */
@keyframes shimmer {
  0% { transform: translateX(-100%); opacity: 0.3; }
  50% { opacity: 1; }
  100% { transform: translateX(100%); opacity: 0.3; }
}

/* Floating smooth loop */
.animate-float-smooth {
  animation: float-smooth 4s ease-in-out infinite;
}
.animate-aura {
  animation: aura 3s ease-in-out infinite;
}
.animate-shimmer {
  animation: shimmer 2.5s linear infinite;
}

/* Glowing particles */
.particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, rgba(144,238,144,1) 0%, rgba(0,0,0,0) 70%);
  border-radius: 50%;
  opacity: 0.8;
  animation: particleMove 6s linear infinite;
}
.particle:nth-child(1) { top: 20%; left: 15%; animation-delay: 0s; }
.particle:nth-child(2) { top: 40%; left: 70%; animation-delay: 1s; }
.particle:nth-child(3) { top: 60%; left: 30%; animation-delay: 2s; }
.particle:nth-child(4) { top: 75%; left: 80%; animation-delay: 3s; }
.particle:nth-child(5) { top: 50%; left: 50%; animation-delay: 4s; }
.particle:nth-child(6) { top: 25%; left: 60%; animation-delay: 5s; }
.particle:nth-child(7) { top: 65%; left: 15%; animation-delay: 6s; }
.particle:nth-child(8) { top: 10%; left: 85%; animation-delay: 2s; }
.particle:nth-child(9) { top: 85%; left: 40%; animation-delay: 3s; }

/* Particle motion (float + shimmer) */
@keyframes particleMove {
  0% { transform: translate(0, 0) scale(1); opacity: 0.9; }
  25% { transform: translate(10px, -20px) scale(1.1); opacity: 1; }
  50% { transform: translate(-15px, -10px) scale(0.9); opacity: 0.6; }
  75% { transform: translate(15px, 20px) scale(1); opacity: 0.8; }
  100% { transform: translate(0, 0) scale(1); opacity: 0.9; }
}

.grid > div {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* Description clamp simulation */
.description {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  transition: all 0.3s ease-in-out;
  text-align: justify;
}

/* ✅ Collapsed/expanded logic */
.description.collapsed {
  line-clamp: 3;
  -webkit-line-clamp: 3;
}

.description.expanded {
  line-clamp: unset;
  -webkit-line-clamp: unset;
}
</style>

<script>
  /* Video modal  */
function openVideoModal(url) {
  const videoId = url
    .replace('https://www.youtube.com/watch?v=', '')
    .replace('https://youtu.be/', '');
  const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
  document.getElementById('videoFrame').src = embedUrl;
  document.getElementById('videoModal').classList.remove('hidden');
}

function closeVideoModal() {
  document.getElementById('videoFrame').src = '';
  document.getElementById('videoModal').classList.add('hidden');
}

function openVideoModal(url, title) {
  const container = document.getElementById("videoContainer");
  const modal = document.getElementById("videoModal");
  const nowPlaying = document.getElementById("nowPlayingTitle");

  let embedHTML = "";
  if (url.includes("youtube.com") || url.includes("youtu.be")) {
    const videoId = url.replace("https://www.youtube.com/watch?v=", "").replace("https://youtu.be/", "").split("&")[0];
    embedHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1"
                   class="w-full h-full" frameborder="0"
                   allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                   allowfullscreen></iframe>`;
  } else if (url.includes("vimeo.com")) {
    const videoId = url.split("/").pop();
    embedHTML = `<iframe src="https://player.vimeo.com/video/${videoId}?autoplay=1"
                   class="w-full h-full" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
  } else {
    embedHTML = `<video src="${url}" class="w-full h-full" controls autoplay></video>`;
  }

  container.innerHTML = embedHTML;
  nowPlaying.textContent = title;
  nowPlaying.classList.remove("hidden");
  modal.classList.remove("hidden");
}

function closeVideoModal() {
  const container = document.getElementById("videoContainer");
  const modal = document.getElementById("videoModal");
  document.getElementById("nowPlayingTitle").classList.add("hidden");
  container.innerHTML = "";
  modal.classList.add("hidden");
}

function toggleDescription(button) {
  const description = button.previousElementSibling;
  const expanded = description.classList.toggle("expanded");
  description.classList.toggle("collapsed", !expanded);
  button.textContent = expanded ? "Show less" : "Show more";
}
</script>

{% endblock %}
